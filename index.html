<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Natu Helados</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f4f4f4;
        }

        h1 {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }

        h2 {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }

        /* Contenedor de filtros */
        .filtros {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
        }

        .filtro-btn {
            padding: 12px 24px;
            background: #fff;
            border: 2px solid #4CAF50;
            border-radius: 25px;
            cursor: pointer;
            font-weight: bold;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            color: #333;
        }

        .filtro-btn:hover {
            background: #f0f9f0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .filtro-btn.active {
            background: #4CAF50;
            color: white;
            border-color: #45a049;
        }

        /* Encabezados de grupo */
        .grupo-header {
            width: 100%;
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 40px 0 20px 0;
            font-size: 1.4rem;
            text-align: center;
            box-shadow: 0 4px 12px rgba(76, 175, 80, 0.3);
            font-weight: bold;
            letter-spacing: 1px;
            text-transform: uppercase;
            border: 3px solid white;
        }

        /* Contenedor principal del cat√°logo */
        .catalogo {
            display: flex;
            flex-direction: column;
            gap: 0; /* Sin gap entre items, solo m√°rgenes individuales */
            padding: 10px 0;
            background: #f0f0f0;
            border-radius: 12px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.05);
        }

        /* Tarjetas con ancho 100% y m√°rgenes de 50px */
        .item {
            background: white;
            padding: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            border: 2px solid #e0e0e0;
            overflow: hidden;
            margin: 50px; /* MARGEN DE 50px EN LOS 4 LADOS */
            width: calc(100% - 100px); /* Ancho 100% menos los 50px de cada lado */
        }

        .item:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
            border-color: #4CAF50;
        }

        /* Contenedor de imagen RESPONSIVE */
        .imagen-container {
            width: 100%;
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            margin-bottom: 7.5px; /* Reducido de 15px a 7.5px */
            background: #f9f9f9;
        }

        /* Mantener proporci√≥n 1:1 (cuadrado) */
        .imagen-container::before {
            content: '';
            display: block;
            padding-top: 100%; /* Proporci√≥n 1:1 (cuadrado) */
        }

        .item img {
            position: absolute;
            text-align: center;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain; /* Mantiene la proporci√≥n sin recortar */
            display: block;
            transition: transform 0.3s ease;
            padding-top: 30px; /* Agregado 30px de padding superior */
        }

        .item:hover img {
            transform: scale(1.05);
        }

        .titulo {
            margin-top: auto;
            font-weight: bold;
            font-size: 1.1rem;
            color: #333;
            line-height: 1.4;
            padding: 5px 0;
            min-height: 60px;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }

        .id-producto {
            display: flex;
            justify-content: center;
            text-align: center;
            align-items: center;
            background: #4CAF50;
            color: white;
            padding: 4px 10px;
            border-radius: 5px;
            font-size: 0.9rem;
            margin-right: 10px;
            font-weight: bold;
            margin-bottom: 8px;
            align-self: center; /* Cambiado de flex-start a center */
        }

        .nombre-producto {
            display: block;
            margin-top: 5px;
            line-height: 1.3;
        }

        .mensaje-vacio {<span class="id-producto">#${producto.id}</span>
            width: calc(100% - 100px); /* Igual que las tarjetas */
            text-align: center;
            padding: 50px;
            background: white;
            border-radius: 12px;
            font-size: 1.2rem;
            color: #666;
            margin: 50px; /* MARGEN DE 50px EN LOS 4 LADOS */
            border: 2px dashed #ddd;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
        }
        
        /* Para asegurar que todos los items tengan la misma altura */
        .item > * {
            flex-shrink: 0;
        }
        
        /* Separaci√≥n adicional alrededor del contenedor */
        .contenedor-principal {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Ajustes responsivos */
        @media (max-width: 768px) {
            .item {
                margin: 40px; /* Reducir m√°rgenes en tablet */
                width: calc(100% - 80px); /* Ajustar ancho */
                padding: 15px;
            }
            
            .mensaje-vacio {
                margin: 40px;
                width: calc(100% - 80px);
                padding: 40px;
            }
            
            .titulo {
                font-size: 1rem;
                min-height: 50px;
                text-align: center;
            }
            
            .grupo-header {
                font-size: 1.2rem;
                margin: 30px 0 15px 0;
                padding: 12px 15px;
            }
            
            .filtro-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .item {
                margin: 25px; /* Reducir m√°rgenes en m√≥viles */
                width: calc(100% - 50px); /* Ajustar ancho */
                padding: 12px;
            }
            
            .mensaje-vacio {
                margin: 25px;
                width: calc(100% - 50px);
                padding: 30px;
            }
            
            .imagen-container::before {
                padding-top: 100%;
            }
            
            .titulo {
                font-size: 0.95rem;
                min-height: 45px;
                text-align: center;
            }
            
            .id-producto {
                padding: 3px 8px;
                font-size: 0.85rem;
            }
            
            .filtros {
                gap: 8px;
            }
            
            .filtro-btn {
                padding: 8px 16px;
                font-size: 0.85rem;
            }
            
            .grupo-header {
                margin: 25px 0 15px 0;
                padding: 10px 12px;
                font-size: 1.1rem;
            }
        }

        @media (max-width: 360px) {
            .item {
                margin: 20px; /* M√°rgenes m√≠nimos */
                width: calc(100% - 40px);
                padding: 10px;
            }
            
            .mensaje-vacio {
                margin: 20px;
                width: calc(100% - 40px);
                padding: 20px;
            }
            
            .titulo {
                font-size: 0.9rem;
                text-align: center;
            }
        }

        /* Separar verticalmente los elementos de la lista */
        #lista-productos li {
            margin-bottom: 10px; /* Espaciado entre elementos */
        }
    </style>

</head>
<body>

<div class="contenedor-principal">
    <h1>Natu Helados</h1>
    <h2>Ice Cream</h2>

    <!-- Filtros -->
    <div class="filtros">
        <button class="filtro-btn active" data-grupo="Todos">üç¶ TODOS</button>
        <button class="filtro-btn" data-grupo="Cremoso">üç® CREMOSOS</button>
        <button class="filtro-btn" data-grupo="FullCremoso">üéÇ FULL CREMOSOS</button>
        <button class="filtro-btn" data-grupo="Premium">‚≠ê PREMIUM</button>
    </div>

    <div id="catalogo" class="catalogo"></div>

    <!-- Contenedor para la lista en el cuadrante IV -->
    <div id="lista-seleccionados" style="position: fixed; bottom: 20px; right: 20px; width: 300px; background: #fff; border: 1px solid #ccc; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); padding: 10px; overflow-y: auto; max-height: 300px;">
        <h3 style="margin: 0 0 10px; font-size: 1.2rem;">Seleccionados</h3>
        <ul id="lista-productos" style="list-style: none; padding: 0; margin: 0; font-size: 0.9rem;"></ul>
    </div>
</div>

<script>
    document.addEventListener("contextmenu", function (e) {
        e.preventDefault();
    });
</script>

<!-- ============ JSON v√°lido con strings ============ -->
<script id="data-json" type="application/json">
{
  "productos": [
    {
      "id": 1,
      "nombre": "PARCHITA CREMOSA",
      "grupo": "Cremoso",
      "stock": 1,
      "imagen": "./outputs/small/parchitacremosa_400.webp"
    },
    {
      "id": 2,
      "nombre": "PI√ëA CREMOSA",
      "grupo": "Cremoso",
      "stock": 1,
      "imagen": "./outputs/small/pi√±acremosa_400.webp"
    },
    {
      "id": 3,
      "nombre": "DURAZNO CREMOSO",
      "grupo": "Cremoso",
      "stock": 1,
      "imagen": "./outputs/small/duraznocremoso_400.webp"
    },
    {
      "id": 4,
      "nombre": "FRESA",
      "grupo": "Cremoso",
      "stock": 1,
      "imagen": "./outputs/small/fresa_400.webp"
    },
    {
      "id": 5,
      "nombre": "GUANA-GUANA",
      "grupo": "FullCremoso",
      "stock": 1,
      "imagen": "./outputs/small/guanaguana_400.webp"
    },
    {
      "id": 6,
      "nombre": "OREO CREMITA",
      "grupo": "FullCremoso",
      "stock": 1,
      "imagen": "./outputs/small/oreocremita_400.webp"
    },
    {
      "id": 7,
      "nombre": "PIE PARCHITA",
      "grupo": "FullCremoso",
      "stock": 1,
      "imagen": "./outputs/small/pieparchita_400.webp"
    },
    {
      "id": 8,
      "nombre": "PIE NARANJA",
      "grupo": "FullCremoso",
      "stock": 1,
      "imagen": "./outputs/small/pienaranja_400.webp"
    },
    {
      "id": 0,
      "nombre": "11-VAINILLA, 10-DALMATA, 9-CHOCO OREO",
      "grupo": "Premium",
      "stock": 1,
      "imagen": "./outputs/small/pastelados_400.webp"
    },
    {
      "id": 0,
      "nombre": "?",
      "grupo": "Premium",
      "stock": 0,
      "imagen": "./outputs/small/pastela2_400.webp"
    },
    {
      "id": 9,
      "nombre": "CHOCO OREO",
      "grupo": "Premium",
      "stock": 0,
      "imagen": "./outputs/small/_chocooreo_400.webp"
    },
    {
      "id": 10,
      "nombre": "DALMATA",
      "grupo": "Premium",
      "stock": 0,
      "imagen": "./outputs/small/_dalmata_400.webp"
    },
    {
      "id": 11,
      "nombre": "VAINILLA",
      "grupo": "Premium",
      "stock": 0,
      "imagen": "./outputs/small/_vainilla_400.webp"
    },
    {
      "id": 12,
      "nombre": "COCO",
      "grupo": "FullCremoso",
      "stock": 1,
      "imagen": "./outputs/small/coco_400.webp"
    },
    {
      "id": 13,
      "nombre": "PIE LIMON",
      "grupo": "FullCremoso",
      "stock": 1,
      "imagen": "./outputs/small/pielimon_400.webp"
    },
    {
      "id": 14,
      "nombre": "CHOKO MILK",
      "grupo": "FullCremoso",
      "stock": 1,
      "imagen": "./outputs/small/chokomilk_400.webp"
    },
    {
      "id": 15,
      "nombre": "AGUACATE",
      "grupo": "Cremoso",
      "stock": 1,
      "imagen": "./outputs/small/aguacate_400.webp"
    },
    {
      "id": 16,
      "nombre": "MANI CREMOSO",
      "grupo": "Cremoso",
      "stock": 1,
      "imagen": "./outputs/small/manicremoso_400.webp"
    },
    {
      "id": 17,
      "nombre": "",
      "grupo": "any",
      "stock": 0,
      "imagen": "./outputs/small/_fresablanco_400.webp"
    },
    {
      "id": 18,
      "nombre": "TAMARINDO",
      "grupo": "Ninguno",
      "stock": 0,
      "imagen": "./outputs/small/tamarindo_400.webp"
    },
    {
      "id": 19,
      "nombre": "RON CON PASAS",
      "grupo": "Ninguno",
      "stock": 0,
      "imagen": "./outputs/small/ronconpasas_400.webp"
    },
    {
      "id": 20,
      "nombre": "NATUGOMITAS",
      "grupo": "Ninguno",
      "stock": 0,
      "imagen": "./outputs/small/natugomitas_400.webp"
    },
    {
      "id": 21,
      "nombre": "MORA CREMOSA",
      "grupo": "Ninguno",
      "stock": 0,
      "imagen": "./outputs/small/moracremosa_400.webp"
    },
    {
      "id": 22,
      "nombre": "CAFE LATTE",
      "grupo": "Ninguno",
      "stock": 0,
      "imagen": "./outputs/small/cafelatte_400.webp"
    },
    {
      "id": 23,
      "nombre": "CHOCO LIGHT",
      "grupo": "Ninguno",
      "stock": 0,
      "imagen": "./outputs/small/chocolight_400.webp"
    },
    {
      "id": 24,
      "nombre": "TAMARINDO CITRICO",
      "grupo": "Ninguno",
      "stock": 0,
      "imagen": "./outputs/small/tamarindocitrico_400.webp"
    },
    {
      "id": 25,
      "nombre": "COCOSETTE",
      "grupo": "Ninguno",
      "stock": 0,
      "imagen": "./outputs/small/cocosette_400.webp"
    },
    {
      "id": 26,
      "nombre": "CHOCO SUSSY",
      "grupo": "Ninguno",
      "stock": 0,
      "imagen": "./outputs/small/chocosussy_400.webp"
    }
  ]
}
</script>

<!-- ============ JavaScript que renderiza el cat√°logo ============ -->
<script>
    // Tomar el JSON embebido
    const data = JSON.parse(document.getElementById("data-json").textContent);
    const catalogoDiv = document.getElementById("catalogo");
    const listaProductosDiv = document.getElementById("lista-productos");
    let filtroActual = "Todos";
    
    // Obtener todos los productos con stock > 0
    const productosConStock = data.productos.filter(producto => producto.stock > 0);
    
    // Funci√≥n para renderizar el cat√°logo con filtro
    function renderCatalogo(filtro = "Todos") {
        filtroActual = filtro;
        
        // Limpiar cat√°logo
        catalogoDiv.innerHTML = "";
        
        // Actualizar botones activos
        document.querySelectorAll('.filtro-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.grupo === filtro) {
                btn.classList.add('active');
            }
        });
        
        // Filtrar productos seg√∫n el filtro seleccionado
        let productosFiltrados;
        if (filtro === "Todos") {
            productosFiltrados = productosConStock;
        } else {
            productosFiltrados = productosConStock.filter(producto => producto.grupo === filtro);
        }
        
        // Si no hay productos con el filtro actual
        if (productosFiltrados.length === 0) {
            const mensaje = document.createElement('div');
            mensaje.className = 'mensaje-vacio';
            mensaje.textContent = `No hay productos disponibles en el grupo ${filtro}`;
            catalogoDiv.appendChild(mensaje);
            return;
        }
        
        // Ordenar por grupo (solo si es "Todos")
        if (filtro === "Todos") {
            productosFiltrados.sort((a, b) => a.grupo.localeCompare(b.grupo));
        }
        
        // Variables para controlar encabezados de grupo
        let currentGroup = null;
        
        productosFiltrados.forEach(producto => {
            // Si estamos mostrando "Todos", agregar encabezado de grupo cuando cambia
            if (filtro === "Todos" && producto.grupo !== currentGroup) {
                currentGroup = producto.grupo;
                const groupHeader = document.createElement("div");
                groupHeader.className = "grupo-header";
                
                // Personalizar seg√∫n el grupo
                let icono = "";
                if (currentGroup === "Cremoso") icono = "üç®";
                else if (currentGroup === "FullCremoso") icono = "üéÇ";
                else if (currentGroup === "Premium") icono = "‚≠ê";
                else if (currentGroup === "Ninguno") icono = "‚ùì";
                
                groupHeader.textContent = `${icono} ${currentGroup} ${icono}`;
                catalogoDiv.appendChild(groupHeader);
            }
            
            // Crear el elemento del producto
            const item = document.createElement("div");
            item.className = "item";
            
            // Determinar emoji seg√∫n grupo
            let grupoEmoji = "";
            if (producto.grupo === "Cremoso") grupoEmoji = "üç®";
            else if (producto.grupo === "FullCremoso") grupoEmoji = "üéÇ";
            else if (producto.grupo === "Premium") grupoEmoji = "‚≠ê";
            else if (producto.grupo === "Ninguno") grupoEmoji = "‚ùì";
            
            item.innerHTML = `
                <div class="imagen-container">
                    <picture>
                        <source srcset="${producto.imagen}" type="image/webp" />
                        <img src="${producto.imagen.replace('.webp','.jpg')}" alt="${producto.nombre}" loading="lazy">
                    </picture>
                </div>
                
                <div class="titulo">
                    <span class="id-producto">#${producto.id}</span>
                    <!--
                       <span class="nombre-producto">${grupoEmoji} ${producto.nombre}</span>
                    -->
                </div>
            `;
            
            catalogoDiv.appendChild(item);
        });
        
        // Funci√≥n para asignar eventos de clic a las im√°genes
        function asignarEventosImagenes() {
            document.querySelectorAll(".imagen-container img").forEach((img, index) => {
                img.addEventListener("click", () => {
                    const producto = productosConStock[index]; // Obtener producto correspondiente
                    listaSeleccionados.push(producto); // Permitir duplicados
                    renderListaSeleccionados();
                });
            });
        }

        // Asegurar que la lista permita scroll
        const listaSeleccionadosDiv = document.getElementById("lista-seleccionados");
        listaSeleccionadosDiv.style.overflowY = "scroll"; // Habilitar scroll vertical
        listaSeleccionadosDiv.style.maxHeight = "300px"; // Limitar altura m√°xima

        // Llamar a la funci√≥n despu√©s de renderizar el cat√°logo
        asignarEventosImagenes();
    }
    
    // Configurar eventos de los botones de filtro
    document.querySelectorAll('.filtro-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const grupo = this.dataset.grupo;
            renderCatalogo(grupo);
        });
    });
    
    // Lista para almacenar los productos seleccionados
    const listaSeleccionados = [];

    // Contenedor de la lista en el cuadrante IV
    const listaProductosUl = document.getElementById("lista-productos");

    // Funci√≥n para renderizar la lista de productos seleccionados
    function renderListaSeleccionados() {
        listaProductosUl.innerHTML = ""; // Limpiar lista
        listaSeleccionados.forEach((producto, index) => {
            const li = document.createElement("li");
            li.textContent = `#${producto.id} - ${producto.nombre}`;

            // Bot√≥n para eliminar el producto
            const eliminarBtn = document.createElement("button");
            eliminarBtn.textContent = "Eliminar";
            eliminarBtn.style.marginLeft = "10px";
            eliminarBtn.style.background = "#ff4d4d";
            eliminarBtn.style.color = "white";
            eliminarBtn.style.border = "none";
            eliminarBtn.style.borderRadius = "5px";
            eliminarBtn.style.cursor = "pointer";
            eliminarBtn.addEventListener("click", () => {
                listaSeleccionados.splice(index, 1); // Eliminar producto de la lista
                renderListaSeleccionados(); // Volver a renderizar
            });

            li.appendChild(eliminarBtn);
            listaProductosUl.appendChild(li);
        });
    }

    // Agregar evento a las im√°genes
    document.querySelectorAll(".imagen-container img").forEach((img, index) => {
        img.addEventListener("click", () => {
            const producto = productosConStock[index]; // Obtener producto correspondiente
            listaSeleccionados.push(producto); // Permitir duplicados
            renderListaSeleccionados();
        });
    });
    
    // Renderizar inicialmente con filtro "Todos"
    renderCatalogo("Todos");
</script>

</body>
</html>